"use strict";function setPlayAgainButtonActive(){$(".play-again").off("click").on("click",newGame),$(".play-again").show()}function setPlayAgainButtonInactive(){$(".play-again").off("click"),$(".play-again").hide()}function updateCurrentTurn(){$(".status").text("Current Turn: "+currentTurn)}function setTurnTo(t){currentTurn=playerState[t],imageToUse=playerState[t+"_img"]}function setPlayAreaActive(){$(".play-area").off("click").on("click",processTurn)}function setPlayAreaInactive(){$(".play-area").off("click")}function resetBoardState(){boardState=[["a","b","c"],["d","e","f"],["g","h","i"]]}function resetBoardImages(){$.each($(".play-area img"),function(t,e){$(e).attr("src",BLANK_IMAGE)})}function resetNumTurn(){numTurn=0}function incrementNumTurn(){numTurn++}function newGame(){setPlayAgainButtonInactive(),setTurnTo("x"),updateCurrentTurn(),resetNumTurn(),resetBoardState(),resetBoardImages(),setPlayAreaActive()}function setSquare(t){$(t.target).attr("src",imageToUse)}function getSquare(t){return $(t.target).parent().attr("class").split(" ")[0]}function disableSquare(t){$("."+t).off("click")}function processTurn(t){console.log("Event triggered"),setSquare(t);var e=getSquare(t);updateBoardState(e),incrementNumTurn(),toggleTurn(),updateCurrentTurn(),checkBoard(),disableSquare(e)}function gameOver(t){"T"==t?$(".status").text("TIE!"):$(".status").text(t+" WON"),setPlayAreaInactive(),setPlayAgainButtonActive()}function checkBoard(){for(var t="T",e=0;e<3;e++)boardState[e][0]==boardState[e][1]&&boardState[e][1]==boardState[e][2]&&(t=boardState[e][0]);for(var i=0;i<3;i++)boardState[0][i]==boardState[1][i]&&boardState[1][i]==boardState[2][i]&&(t=boardState[0][i]);boardState[0][0]==boardState[1][1]&&boardState[1][1]==boardState[2][2]?t=boardState[0][0]:boardState[2][0]==boardState[1][1]&&boardState[1][1]==boardState[0][2]&&(t=boardState[2][0]),9==numTurn&&"T"==t?gameOver(t):"T"!=t&&9!=numTurn?gameOver(t):9==numTurn&&gameOver(t)}function updateBoardState(t){var e=t[1],i=t[3];boardState[e][i]=currentTurn}function toggleTurn(){"X"===currentTurn?setTurnTo("o"):"O"===currentTurn&&setTurnTo("x")}var X_IMAGE="images/x.png",O_IMAGE="images/o.png",playerState={x:"X",x_img:X_IMAGE,o:"O",o_img:O_IMAGE},lastPlayed,BLANK_IMAGE="images/blank.png",currentTurn,numTurn,imageToUse,boardState;$(".tester").click(function(){$(".jasmine_html-reporter").toggle()}),$(function(){describe("On Load Game State",function(){describe("The Board",function(){it("should be empty on load",function(){$.each($(".play-area img"),function(t,e){expect($(e).attr("src")).toBe("images/blank.png")})}),it("should have a hidden Play Again button",function(){newGame(),expect("none"===$(".play-again").css("display")).toBe(!0)})}),describe("Current Turn",function(){it("should be Player X",function(){expect(currentTurn).toBe("X")}),it("should be displayed properly",function(){expect($(".status").text()).toBe("Current Turn: X")})})}),describe("Playing The Game",function(){it("should alternate turns correctly",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),expect(currentTurn).toBe("O"),expect($(".status").text()).toBe("Current Turn: O"),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),expect(currentTurn).toBe("X"),expect($(".status").text()).toBe("Current Turn: X"),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),expect(currentTurn).toBe("O"),expect($(".status").text()).toBe("Current Turn: O"),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),expect(currentTurn).toBe("X"),expect($(".status").text()).toBe("Current Turn: X"),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),expect(currentTurn).toBe("O"),expect($(".status").text()).toBe("Current Turn: O"),$(".s1-2").trigger($.Event("click",{target:$(".s1-2 img")})),expect(currentTurn).toBe("X"),expect($(".status").text()).toBe("Current Turn: X"),$(".s2-1").trigger($.Event("click",{target:$(".s2-1 img")})),expect(currentTurn).toBe("O"),expect($(".status").text()).toBe("Current Turn: O"),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),expect(currentTurn).toBe("X"),expect($(".status").text()).toBe("Current Turn: X"),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect(currentTurn).toBe("O"),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should start a new game when Play Again? is clicked",function(){$(".play-again").click(),$.each($(".play-area img"),function(t,e){expect($(e).attr("src")).toBe("images/blank.png")}),expect("none"===$(".play-again").css("display")).toBe(!0),expect(currentTurn).toBe("X"),expect($(".status").text()).toBe("Current Turn: X")}),it("should not update when clicking on a square already occupied",function(){console.log("first click"),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),expect(currentTurn).toBe("O"),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),expect(currentTurn).toBe("O")})}),describe("Various Winning Scenarios",function(){beforeEach(function(){newGame()}),afterAll(function(){newGame()}),it("should correctly identify wins in the top row for X",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the top row for O",function(){$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the middle row for X",function(){$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-2").trigger($.Event("click",{target:$(".s1-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the middle row for O",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s1-2").trigger($.Event("click",{target:$(".s1-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the bottom row for X",function(){$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s2-1").trigger($.Event("click",{target:$(".s2-1 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the bottom row for O",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s2-1").trigger($.Event("click",{target:$(".s2-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the first column for X",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the first column for O",function(){$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the second column for X",function(){$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s2-1").trigger($.Event("click",{target:$(".s2-1 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the second column for O",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s2-1").trigger($.Event("click",{target:$(".s2-1 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the third column for X",function(){$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-2").trigger($.Event("click",{target:$(".s1-2 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins in the third column for O",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s1-2").trigger($.Event("click",{target:$(".s1-2 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins on the first diagonal for X",function(){$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins on the first diagonal for O",function(){$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins on the second diagonal for X",function(){$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s2-2").trigger($.Event("click",{target:$(".s2-2 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),expect($(".status").text()).toBe("X WON"),expect($(".play-again").css("display")).toBe("inline-block")}),it("should correctly identify wins on the second diagonal for O",function(){$(".s0-1").trigger($.Event("click",{target:$(".s0-1 img")})),$(".s2-0").trigger($.Event("click",{target:$(".s2-0 img")})),$(".s0-0").trigger($.Event("click",{target:$(".s0-0 img")})),$(".s1-1").trigger($.Event("click",{target:$(".s1-1 img")})),$(".s1-0").trigger($.Event("click",{target:$(".s1-0 img")})),$(".s0-2").trigger($.Event("click",{target:$(".s0-2 img")})),expect($(".status").text()).toBe("O WON"),expect($(".play-again").css("display")).toBe("inline-block")})})});